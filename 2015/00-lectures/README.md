# Компьютерные системы

Здесь находятся слайды лекций и примеры, демонстрировавшиеся на лекциях.

Лекции состоят из двух частей: три лекции по архитектуре ЭВМ,
которые были прочитаны в конце четвертого модуля первого курса,
и основные лекции, которые были прочитаны в первом и втором модуле
второго курса.

## Архитектура ЭВМ

### Лекция 1.

Физические основы функционирования цифровой электроники.
Поколения ЭВМ.
История развития ЭВМ.
Основы функционирования оперативной памяти.
Основы кэширования.

### Лекция 2.

Основы низкоуровневого программирования.
Характеристики процессорных архитектур.
Основы архитектуры x86.
Соглашения о вызовах на x86.

### Лекция 3.

Взаимодействие со внешними устройствами.
Прерывания.
DMA.
Мультипрограммирование.
Виртуальная память.
Переключение контекста.

## Компьютерные системы.

### Лекция 1.

Организационные моменты курса.
Компьютерная система. Исполнители.
Операционная система и ее задачи.
Ресурсы КС.
История развития операционных систем.

### Лекция 2.

Требования к аппаратуре для реализации операционных систем.
Ядро операционной системы. Системные вызовы.
Интерфейс POSIX. Использование интерфейса на Си из программ на Си++.
Обработка ошибок системных вызовов. Аргументы командной строки.
Переменные окружения.

### Лекция 3.

Файловая система. Атрибуты файлов. Регулярные файлы, каталоги.
Пути в файловой системе. Модель контроля доступа к файлам.
Хранение абсолютного (календарного) времени.
Файловый дескриптор. POSIX API открытия файла.

### Лекция 4.

POSIX API работы с файловыми дескрипторами.
Логическая организация таблиц открытых файлов в ядре ОС.
Позиционирование в файле, чтение и запись.
Атомарность операций чтения и записи при работе с файлами.

### Лекция 5.

Модель организации хранения данных в файловой системе.
Символические и жесткие ссылки. API для работы с файлами.
Просмотр содержимого каталогов.
Монтирование файловых систем.
Файловые системы /proc и /sys.
Драйвер файловой системы FUSE.

### Лекция 6.

Блокировки файлов. Квотирование.
Физическая организация хранения данных в файловых системах.
Файловые системы RT11, UNIX SysV, Ext2, Ext3, Ext4.
Работа с абсолютным временем в POSIX.

### Лекция 7.

Управление памятью.
Виртуальное адресное пространство процесса на Linux x86.
Ограничения виртуального адресного пространства.
Управление виртуальным адресным пространством.
Управление кучей.

### Лекция 8.

Файлы, отображаемые в память.
Стратегия copy-on-write.
Загрузка файла на исполнение.
Разделяемые библиотеки.
Позиционно-независимый код.

### Лекция 9.

Выравнивание данных.
Виртуальная адресация.
Табличная виртуальная адресация x86.
Управление физической памятью в ядре Linux.

### Лекция 10.

Управление виртуальной памятью в ядре Linux.
Алгоритмы замещения страниц физической памяти
(NRU, FIFO, Clock, LRU, Two-list LRU, NFU).
POSIX API для подгрузки динамических библиотек.

### Лекция 11.

Процессы. Атрибуты и идентификация процессов.
Создание процессов (fork), побочные эффекты копирования процессов.
Завершение процессов (exit). Ожидание завершения порожденных
процессов (wait*).

### Лекция 12.

Группы процессов. Жизненный цикл процесса. Состояние процесса.
Замещение тела процесса (exec*).
Схема fork/exec. Подготовка аргументов командной строки.
Привилегии процесса. SUID/SGID бит.

### Лекция 13.

Перенаправление ввода-вывода в стандартные потоки.
Неименованные каналы (pipe). Блокировки при работе
с каналами. Использование каналов для создания
конвейеров.
Связь файловых дескрипторов и высокоуровневого ввода вывода
Си (FILE*) и Си++ (stream).

### Лекция 14.

Основы взаимодействия по TCP. IP-адреса, порты, представление данных.
Сокеты. Системные вызовы socket, bind, listen, connect, accept, shutdown.

### Лекция 15.

Сигналы. Посылка сигналов (kill). Доставка сигналов в процесс.
Установка обработки сигналов (signal). Особенности обработки сигналов
в System V и BSD. Асинхронно-безопасные функции.

### Лекция 16.

Корректная обработка сигналов. volatile, sig_atomic_t. 
Блокирование сигналов по маске. Ожидание поступления сигналов.
Именованные каналы.
Типичные ошибки взаимодействующих процессов: тупик (deadlock), гонки (race condition).

### Лекция 17.

Неблокирующий ввод-вывод. Опрос состояния файловых дескрипторов. Системный вызов pselect.
Событийно-ориентированные программы. Системный вызов epoll. 
Отображение средств мониторинга внешних событий в файловые дескрипторы в Linux (inotify, signalfd, timerfd, eventfd).

### Лекция 18.

Нити. Библиотека pthread. Создание нити (pthread_create), завершение нити (pthread_exit),
ожидание завершения нити (pthread_join), атрибуты нити. Управление размером стека нити.
Совместное использование нитей, процессов и сигналов. Принудительное завершение нити (pthread_cancel).
Thread-local storage.

### Лекция 19.

Проблема гонок при параллельном выполнении. Критические секции. 
Реализация блокировок с помощью атомарных операций с памятью (atomic).
Семафоры. Мьютексы в POSIX thread (pthread_mutex). Рекурсивные мьютексы.
Мониторы. Условные переменные в POSIX thread (pthread_cond). Барьеры.

### Лекция 20.

Модель памяти. Data race. std::memory_order.
Обедающие философы. Читатели и писатели. Производители и потребители.
Спящий парикмахер.

### Лекция 21.

Планирование процессов. Пакетный планировщик, планировщик разделения
времени, планировщик реального времени. Проблема инверсии
приоритетов.
